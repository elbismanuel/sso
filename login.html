<!DOCTYPE html>
<html lang="es">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Portal Único del Ciudadano - Gobierno Nacional</title>
	<script src="https://cdn.tailwindcss.com"></script>
	<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/intro.js@7.2.0/minified/introjs.min.css">
	<script src="https://cdn.jsdelivr.net/npm/intro.js@7.2.0/minified/intro.min.js"></script>
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
	<style>
		body,
		html {
			margin: 0;
			padding: 0;
			height: 100vh;
			font-family: 'Roboto', sans-serif;
		}

		.modal {
			display: none;
			position: fixed;
			z-index: 99999;
			top: 0;
			left: 0;
			width: 100%;
			height: 100%;
			background-color: rgba(0, 0, 0, 0.9);
			padding: 20px;
			justify-content: center;
			align-items: center;
		}

		.modal-content {
			max-width: 90%;
			max-height: 90vh;
			object-fit: contain;
		}

		.modal-close {
			position: absolute;
			top: 20px;
			right: 30px;
			color: #fff;
			font-size: 30px;
			cursor: pointer;
			width: 40px;
			height: 40px;
			background: rgba(255, 255, 255, 0.1);
			border-radius: 50%;
			display: flex;
			align-items: center;
			justify-content: center;
			transition: all 0.3s ease;
		}

		.modal-close:hover {
			background: rgba(255, 255, 255, 0.2);
			transform: rotate(90deg);
		}

		.tour-button {
			background: linear-gradient(45deg, #FFA500, #FFD700);
			border: none;
			color: white;
			padding: 12px 24px;
			border-radius: 50px;
			font-weight: 600;
			display: flex;
			align-items: center;
			gap: 8px;
			cursor: pointer;
			transition: all 0.3s ease;
			box-shadow: 0 4px 15px rgba(255, 165, 0, 0.3);
		}

		.tour-button:hover {
			transform: translateY(-2px);
			box-shadow: 0 6px 20px rgba(255, 165, 0, 0.4);
		}

		.flow-link {
			color: #3b82f6;
			text-decoration: underline;
			cursor: pointer;
			margin-top: 10px;
			display: inline-block;
		}

		.introjs-tooltip {
			z-index: 9998;
		}

		.introjs-disabled {
			opacity: 1 !important;
			color: #2563eb !important;
			border-color: #2563eb !important;
			cursor: pointer !important;
		}

		.introjs-prevbutton {
			display: block !important;
			opacity: 1 !important;
			color: #2563eb !important;
			border-color: #2563eb !important;
			cursor: pointer !important;
		}
	</style>
</head>

<body>
	<!-- Banner informativo -->
	<div class="bg-blue-50 border-l-4 border-blue-500 p-4">
		<div class="flex items-center">
			<div class="flex-shrink-0">
				<i class="fas fa-info-circle text-blue-500"></i>
			</div>
			<div class="ml-3">
				<h3 class="text-sm font-medium text-blue-800">Guía de Implementación SSO</h3>
				<p class="text-sm text-blue-700 mt-1">
					Esta guía muestra el proceso de autenticación SSO y el flujo de validación de token para acceder al sistema.
				</p>
			</div>
		</div>
	</div>

	<div class="flex w-full h-screen">
		<!-- Sección Izquierda con Imagen -->
		<div class="hidden lg:block lg:w-2/3 relative">
			<div class="absolute inset-0">
				<img src="/sso/img/topImageHeader.png" alt="Fondo" class="h-full w-full object-cover">
				<div class="absolute inset-0 bg-gradient-to-b from-blue-900/50 to-blue-800/50">
					<div class="absolute top-8 left-8">
						<img src="/sso/img/aig.png" alt="Logo Gobierno" class="h-24 object-contain">
					</div>
					<div class="absolute bottom-8 left-8 right-8 text-white">
						<h2 class="text-2xl font-bold">Portal Único del Ciudadano</h2>
						<p class="text-sm mt-2 opacity-90">Sistema oficial del Gobierno Nacional de Panamá</p>
					</div>
				</div>
			</div>
		</div>

		<!-- Sección Derecha del Login -->
		<div class="w-full lg:w-1/3 bg-white overflow-y-auto flex items-center">
			<div class="w-full px-8">
				<div class="max-w-lg mx-auto">
					<!-- Header -->
					<div class="mb-8">
						<div class="flex flex-col items-center">
							<div class="mb-2">
								<img src="/sso/img/311.png" alt="Logo" class="h-24 w-auto">
							</div>
							<h2 class="text-2xl font-bold text-gray-900 mt-4">Iniciar sesión</h2>
						</div>
					</div>

					<!-- Formulario -->
					<form class="space-y-4">
						<!-- Email/Cédula -->
						<div class="mb-4">
							<label for="correoElectronico" class="block text-sm font-medium text-gray-700 mb-2">
								Correo electrónico o cédula
							</label>
							<input type="text" id="correoElectronico" placeholder="ejemplo@correo.com | 0-000-0000"
								class="block w-full px-3 py-3 text-gray-700 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent border-gray-300">
						</div>

						<!-- Password -->
						<div class="mb-4">
							<label for="contrasena" class="block text-sm font-medium text-gray-700 mb-2">
								Contraseña
							</label>
							<input type="password" id="contrasena" placeholder="••••••••"
								class="block w-full px-3 py-3 text-gray-700 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent border-gray-300">
						</div>

						<!-- Botón Submit -->
						<button type="submit"
							class="w-full mt-6 flex items-center justify-center px-6 py-3 rounded-md text-white font-medium bg-blue-600 hover:bg-blue-700 transition-all duration-200">
							Iniciar sesión
						</button>

						<!-- Links adicionales -->
						<div class="mt-6 flex justify-center">
							<a href="#" class="text-sm text-blue-600 hover:text-blue-800">
								¿Olvidaste tu contraseña?
							</a>
						</div>
					</form>
				</div>
			</div>
		</div>
	</div>

	<!-- Modal para la imagen -->
	<div id="imageModal" class="modal">
		<span class="modal-close" onclick="closeModal(event)">×</span>
		<img class="modal-content" id="modalImage" src="img/sso2.png" alt="Flujo SSO">
	</div>

	<!-- Botón de tour -->
	<button id="start-tour" class="tour-button fixed bottom-4 right-4 z-20">
		<i class="fas fa-map-marked-alt"></i>
		Iniciar Tour
	</button>

	<script>

		let currentTour = null;

		function startTour() {
			if (currentTour) {
				currentTour.exit();
			}

			currentTour = introJs().setOptions({
				showProgress: true,
				showBullets: false,
				exitOnOverlayClick: true,
				exitOnEsc: true,
				nextLabel: 'Entendido',
				prevLabel: 'Volver a inicio',
				skipLabel: '<i class="fas fa-times"></i>',
				doneLabel: 'Continuar',
				tooltipClass: 'customTooltip',
				steps: [
					{
						element: '#correoElectronico',
						intro: 'Al ingresar las credenciales y hacer clic en "Iniciar sesión", el SSO validará la información.'
					},
					{
						element: '#contrasena',
						intro: 'Tras una validación exitosa, el SSO redireccionará a una ruta específica del proyecto web con un token. Este token será validado mediante una API para determinar si se permite el acceso al sistema. <br><br>Para ver el diagrama del flujo completo <a href="#" class="flow-link" onclick="openModal(event)">haz clic aquí</a>'
					}
				]
			});

			// Modificar el comportamiento del botón anterior
			currentTour.onafterchange(function () {
				// Habilitar el botón anterior en todos los pasos
				document.querySelector('.introjs-prevbutton').classList.remove('introjs-disabled');

				// Agregar evento de clic al botón anterior
				document.querySelector('.introjs-prevbutton').onclick = function () {
					window.location.href = 'index.html';
				};
			});

			currentTour.oncomplete(function () {
				window.location.href = 'index.html';
			});

			currentTour.start();
		}

		function openModal(event) {
			if (event) {
				event.preventDefault();
				event.stopPropagation();
			}

			// Si hay un tour activo, lo cerramos
			if (currentTour) {
				currentTour.exit();
				currentTour = null;
			}

			const modal = document.getElementById('imageModal');
			modal.style.display = "flex";
		}

		function closeModal(event) {
			if (event) {
				event.preventDefault();
				event.stopPropagation();
			}
			document.getElementById('imageModal').style.display = "none";

			// Reiniciamos el tour después de cerrar el modal
			startTour();
		}

		document.addEventListener('keydown', function (event) {
			if (event.key === "Escape") {
				closeModal();
			}
		});

		// Event listener para el botón de inicio del tour
		document.getElementById('start-tour').addEventListener('click', startTour);

		setTimeout(startTour, 500);
	</script>
</body>

</html>